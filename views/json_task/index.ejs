<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    td,
    th {
        border: 2px solid black;
        text-align: left;
        padding: 8px;
    }

    img {
        width: 100px;
    }

    .btns {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        width: 100%;
    }

    #myInput {
        background-position: 10px 12px;
        /* Position the search icon */
        background-repeat: no-repeat;
        /* Do not repeat the icon image */
        width: 100%;
        /* Full-width */
        font-size: 16px;
        /* Increase font-size */
        padding: 12px 20px 12px 40px;
        /* Add some padding */
        border: 1px solid #ddd;
        /* Add a grey border */
        margin-bottom: 12px;
        /* Add some space below the input */
    }
</style>

<body>
    <center>
        <h2>JSON Placeholder API</h2>
    </center>

    <div class="btns">
        <input type="button" value="<<" id="homebtn" onclick="homebtn()">
        <input type="button" value="<" id="prevbtn" onclick="prevbtn()">
        <p id="pageno"></p>
        <input type="button" value=">" id="nextbtn" onclick="nextbtn()">
        <input type="button" value=">>" id="lastbtn" onclick="lastbtn()">
    </div>

    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for Title..">

    <table id="myTable">
        <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Content</th>
            <th>More</th>
        </tr>
        <tbody id="table_data">

        </tbody>
    </table>

    <script>
        var objectdata = [];
        let currentpage = 1;
        let itemsperpage = 10;
        let length = 0;
        let pageno = document.getElementById("pageno");


        const fetchdata = () => {
            fetch('https://jsonplaceholder.typicode.com/posts')
                .then(response => response.json())
                .then((objectdata) => {
                    console.log(objectdata);

                    length = objectdata.length;

                    pageno.innerHTML = currentpage;


                    const indexoflastpage = currentpage * itemsperpage;

                    const indexoffirstpage = indexoflastpage - itemsperpage;

                    const currentitems = objectdata.slice(indexoffirstpage, indexoflastpage);


                    let tabledata = "";

                    currentitems.map((value) => {
                        tabledata += `<tr>
                    <td>${value.id}</td>
                    <td>${value.title}</td>
                    <td>${value.body}</td>
                    <td><a href="/json/user?userId=${value.id}">More</a></td>
                  </tr>`
                    })
                    document.getElementById("table_data").innerHTML = tabledata;
                })
                .catch((err) => {
                    console.log(err);
                })
        }

        fetchdata();

        const homebtn = () => {
            if (currentpage == 1) {
                document.getElementById("homebtn").disabled = true;
            }
            document.getElementById("homebtn").disabled = false;
            currentpage = 1;
            fetchdata();
        }
        const prevbtn = () => {
            if ((currentpage < 1)) {
                document.getElementById("prevbtn").disabled = true;
            }
            else if (currentpage > 1) {
                currentpage--;
            }

            document.getElementById("prevbtn").disabled = false;
            fetchdata();

        }
        const nextbtn = () => {
            if ((currentpage * itemsperpage) > length) {
                document.getElementById("nextbtn").disabled = true;
            }
            else if (currentpage <= (length / itemsperpage) - 1) {
                currentpage++;
            }
            document.getElementById("nextbtn").disabled = false;

            fetchdata();

        }
        const lastbtn = () => {
            if ((currentpage * itemsperpage) > length) {
                document.getElementById("lastbtn").disabled = true;
            }
            document.getElementById("lastbtn").disabled = false;
            currentpage = (length / itemsperpage);
            fetchdata();
        }

        function myFunction() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[1];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
</body>

</html>